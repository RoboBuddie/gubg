#!/usr/bin/env ruby

require("gubg/utils")

res = ARGV.map do |arg|
    Regexp.new(arg.split("")*".*")
end
fns = []
PWD = Dir.pwd
Dir.each("./") do |dir, fn|
    fn = File.expand_path(fn, dir)
    fnRelative = Dir.relative(fn, PWD)
    fns << fn if res.any?{|re|re =~ fnRelative}
    :ok
end
fns.each do |fn|
    system("gvim --remote-tab-silent #{fn}")
end
system("wmctrl -a GVIM")
